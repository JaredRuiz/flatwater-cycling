<!DOCTYPE html>
  <html>
    <head>
      <meta charset=utf-8 />
        <title>Polylines</title>
        <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
        <script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.1/mapbox.js'></script>
        <link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.1/mapbox.css' rel='stylesheet' />
        <style>
          body { margin:0; padding:0; }
          #map { position:absolute; top:0; bottom:0; width:100%; }

/* pop-up style */
pre.ui-coordinates {
  position:absolute;
  bottom:10px;
  left:10px;
  padding:5px 10px;
  background:rgba(0,0,0,0.5);
  color:#fff;
  font-size:11px;
  line-height:18px;
  border-radius:3px;
  }

        </style>
        <script src="array.js"></script>
        <script src="one-line-to-two.js"></script>
      </head>
      <body>
        <div id='map'></div>
  <pre id='coordinates' class='ui-coordinates'></pre>
        <script>
          L.mapbox.accessToken = 'pk.eyJ1Ijoic3doYzEwNjYiLCJhIjoiS2xvdHlOOCJ9.AuwjSDNFKVae2_skfgLouA';

var coordinates = document.getElementById('coordinates');

// create a map object
var map = L.mapbox.map('map', 'examples.map-i86nkdio');
// var map = L.mapbox.map('map');

// make a MapLine object; this holds all necessary line info
var ml = new MapLine(oldLine,  speedLine);

// center and zoom on map
  map.fitBounds([
	  [ml.south(), ml.west()],
	  [ml.north(), ml.east()],
  ]);

// style options for the line
var polyline_options = {
  color: '#FF0000',
  weight: .5
};

// add line to map, point by point
for (var j = 0, max = ml.polygonPoints.length; j < max; j++) {
  var poly = L.polygon(ml.polygonPoints[j], polyline_options);
  poly.addTo(map);
}

// mark features to scroll over
var geojson = ml.markFeatures();

// add all markers to map
// TODO still not sure how to hide markers on map...

// TODO: figure out how to do UTFGRID object...
// var myLayer = L.mapbox.gridLayer(utfgrid)
var myLayer = L.mapbox.featureLayer(geojson)
// .setFilter(function() { return false; })
  .addTo(map);

myLayer.on('mouseover', function(e) {
var speed = e.layer.feature.properties.title;
  coordinates.innerHTML = speed + " mph";
});
myLayer.on('mouseout', function(e) {
  coordinates.innerHTML = "";
});

        </script>
      </body>
    </html>


