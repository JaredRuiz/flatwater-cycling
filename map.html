<!DOCTYPE html>
  <html>
    <head>
      <meta charset=utf-8 />
        <title>Polylines</title>
        <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
        <script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.1/mapbox.js'></script>
        <link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.1/mapbox.css' rel='stylesheet' />
        <style>
          body { margin:0; padding:0; }
          #map { position:absolute; top:0; bottom:0; width:100%; line-width: 0.01; }
        </style>
        <script src="array.js"></script>
        <script src="one-line-to-two.js"></script>
      </head>
      <body>
        <div id='map'></div>
        <script>
          L.mapbox.accessToken = 'pk.eyJ1Ijoic3doYzEwNjYiLCJhIjoiS2xvdHlOOCJ9.AuwjSDNFKVae2_skfgLouA';


       
var map = L.mapbox.map('map', 'examples.map-i86nkdio');

// make a MapLine object
var ml = new MapLine(oldLine,  speedLine);

// center and zoom on map
  map.fitBounds([
	  [ml.south(), ml.west()],
	  [ml.north(), ml.east()],
  ]);

// style options for the line
var polyline_options = {
  color: '#FF0000',
  weight: .5
};

// add line to map
for (var j = 0, max = ml.polygonPoints.length; j < max; j++) {
  var poly = L.polygon(ml.polygonPoints[j], polyline_options);
  // var poly = L.polygon(ml.polygonPoints[j], generatePOptions(ml.polygonPoints[j]));
  poly.addTo(map);
}

// mark features to scroll over
var geojson = ml.markFeatures();

var myLayer = L.mapbox.featureLayer(geojson)

// add all markers to map
// TODO still not sure how to hide markers on map...
// var myLayer = L.mapbox.gridLayer(geojson)
var myLayer = L.mapbox.featureLayer(geojson)
// .setFilter(function() { return false; })
  .addTo(map);


myLayer.on('mouseover', function(e) {
    e.layer.openPopup();
});
myLayer.on('mouseout', function(e) {
    e.layer.closePopup();
});

        </script>
      </body>
    </html>


